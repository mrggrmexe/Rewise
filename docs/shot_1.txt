Rewise - shot_1.txt
Сводка решений и размышлений по проекту

1) Общая идея приложения
- Desktop-приложение на C++ + Qt Widgets.
- Пользователь создаёт карточки вида: Вопрос → Эталонный ответ.
- Система хранит карточки локально и предлагает их для повторения.
- В режиме повторения пользователь вводит ответ, система сравнивает с эталоном и показывает:
  - процент совпадения
  - краткий ревью с подсветкой различиями разными цветами

2) Платформа и ограничения
- Основная платформа разработки: macOS.
- Приложение строго локальное (без аккаунтов, облака и синхронизации).
- Хранилище: JSON (один файл db.json).
- На данном этапе: без шифрования, без резервных копий, без статистики и истории попыток.

3) Карточки и данные
- Вопрос: простой текст.
- Эталонный ответ: свободный текст (не одно слово, может быть предложением/абзацем).
- Один правильный ответ на карточку (как в карточках/flashcards).
- Подсказок/комментариев/тегов/сложности пока нет.

4) Папки (категории)
- Папки логические (внутри приложения), НЕ физические папки диска.
- Папки только одного уровня (без вложенности).
- "Все вопросы" — общая папка/режим, куда попадают все карточки автоматически.
  Важно: "Все вопросы" реализуется как виртуальный фильтр, а не как реальная папка в данных.

5) Режим повторения
- Выбор вопросов: случайный.
- Сессия повторения: бесконечная (пока пользователь не остановит).
- После ответа:
  - система сразу показывает результат (процент + подсветка)
  - пользователь может отметить самооценку (Верно/Почти/Неверно), но пока эта оценка никуда не сохраняется
- Проверка ответа запускается только кнопкой (Enter в поле ввода не проверяет).

6) Сравнение ответов (умное) и подсветка
Задача разделена на две части: оценка совпадения и визуальный diff.

6.1) Нормализация для "умного" сравнения
- приводим к lower-case
- trim по краям
- схлопываем последовательности пробелов до одного пробела
- игнорируем пунктуацию (удаляем/не учитываем знаки препинания)
- цель: чтобы регистр, лишние пробелы и пунктуация не портили результат

6.2) Процент совпадения (similarity)
- идея: использовать расстояние Левенштейна (Levenshtein distance) на нормализованных строках
- формула:
  similarity = 1 - dist(a,b) / max(len(a), len(b))
- вывод в интерфейсе: round(similarity * 100) %

6.3) Подсветка различий (краткий ревью)
- лучше делать diff по словам, а не по символам:
  - токенизация на слова
  - LCS (longest common subsequence) по токенам
  - категории для подсветки:
    - совпавшее (обычно)
    - лишнее у пользователя (выделить цветом)
    - пропущено относительно эталона (выделить цветом в эталоне)
- UI-идея: показывать два read-only текста (эталон и ответ пользователя) и раскрашивать токены форматами.

7) UI/навигация (Qt Widgets)
- Слева: "вкладки экранов" + список добавленных папок.
- Экраны:
  1) "Вопросы" (CRUD карточек)
     - список карточек выбранной папки
     - редактор: question/answer
     - кнопки: Новый / Сохранить / Удалить
  2) "Повторение"
     - отображение вопроса
     - поле ввода ответа
     - кнопка "Проверить"
     - после проверки: процент + дифф-подсветка + самооценка + кнопка "Следующий"
- Выбор папки для повторения делается в левой панели (не отдельным dropdown на экране).

8) Структура репозитория и проекта
- Название репозитория / проекта: Rewise
- Требование: Qt-проект находится в отдельной папке внутри репозитория.
- Выбран вариант B: Qt-проект в подпапке "rewise-app/"

Рекомендуемая структура:
rewise/
  README.md
  LICENSE
  .gitignore
  .editorconfig
  docs/
    shot_1.txt
  scripts/              (опционально)
  .github/workflows/    (опционально)
  rewise-app/           <-- Qt project lives here
    CMakeLists.txt
    cmake/              (опционально)
    src/
      main.cpp
      app/              (MainWindow, AppPaths)
      ui/               (CardsPage, ReviewPage, widgets/)
      domain/           (Card, Folder)
      storage/          (Repository: JSON load/save)
      review/           (Normalize, Levenshtein, WordDiff LCS)
      utils/            (мелкие утилиты)
    resources/
      resources.qrc
      icons/
    tests/              (опционально, позже)

Команда сборки из корня репозитория (план):
- cmake -S rewise-app -B build
- cmake --build build
Папка build/ в корне должна игнорироваться.

9) Gitignore
- Нужен профессиональный .gitignore под macOS/Windows/Linux и Qt/Qt Creator, а также под CMake/qmake и бинарные артефакты.
- Принцип: игнорировать системные мусорные файлы, IDE user-файлы, build директории, промежуточные .moc/.qrc/.ui, артефакты компиляции.

Конец shot_1.txt
